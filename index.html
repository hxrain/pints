<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>PintS: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PintS
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Portable Intrinsics for SIMD</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">PintS Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Portable intrinsics for SIMD</p>
<p>Doxygen documentation: <a href="http://lemaitre-thesis.github.io/pints/">http://lemaitre-thesis.github.io/pints/</a></p>
<h2>What is it?</h2>
<p>PintS is an abstraction library to write SIMD code. It is fully compatible with both C and C++ and it is a header only library.</p>
<p>The main goal is to provide a library to have the same code on multiple SIMD architecture or even without SIMD.</p>
<h2>How does it work?</h2>
<p>The library consists in definitions of the functions for non SIMD architectures, and specialization of some of them for SIMD architectures. These specializations are done by undefining the previous macro (which can be an alias to a function) and redefining it for the target architecture.</p>
<p>The library is able to detect the target architecture using information given by the compiler and loads automatically the required header files.</p>
<h2>How does it look?</h2>
<div class="fragment"><div class="line"><span class="keywordtype">float</span> dotprod_v8f(<span class="keyword">const</span> <span class="keywordtype">float</span>* a, <span class="keyword">const</span> <span class="keywordtype">float</span>* b, <span class="keywordtype">int</span> n) {</div>
<div class="line">  <span class="comment">// Local var declarations</span></div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line">  <a class="code" href="structv8i.html">v8i</a> vmask;</div>
<div class="line">  <a class="code" href="structv8f.html">v8f</a> va, vb, s,</div>
<div class="line">      sp, add1, add1p, add2, add2p, add3; <span class="comment">// used only for the final reduction</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">// initialization</span></div>
<div class="line">  s = <a class="code" href="group__set.html#gae34f02fd37f3ca8b22958718cc44e9d4">v8f_zero</a>();</div>
<div class="line"></div>
<div class="line">  <span class="comment">// main loop</span></div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; n - 8; i += 8) {</div>
<div class="line">    va = <a class="code" href="group__load.html#ga7f8cbdb5c95eb74031910f114d55c266">v8f_loadu</a>(&amp;a[i]);</div>
<div class="line">    vb = <a class="code" href="group__load.html#ga7f8cbdb5c95eb74031910f114d55c266">v8f_loadu</a>(&amp;b[i]);</div>
<div class="line">    s = <a class="code" href="group__arith.html#ga7f24f8ef9179b11fad584cfd3ae3bf14">v8f_fmadd</a>(va, vb, s);</div>
<div class="line"></div>
<div class="line">  } <span class="comment">/* remainder */</span> {</div>
<div class="line">    vmask = <a class="code" href="group__cmp.html#ga810d3b70a69141070054eb12d126d6ca">v8i_gt</a>(<a class="code" href="group__set.html#ga9dfb44be9a21ddb52ee40bb659774458">v8i_set1</a>(n-i), <a class="code" href="group__set.html#ga90f0cf1f4d13b2328447fffd849c9499">v8i_set</a>(0, 1, 2, 3, 4, 5, 6, 7));</div>
<div class="line">    va = <a class="code" href="group__load.html#ga7f8cbdb5c95eb74031910f114d55c266">v8f_loadu</a>(&amp;a[i]);</div>
<div class="line">    vb = <a class="code" href="group__load.html#ga7f8cbdb5c95eb74031910f114d55c266">v8f_loadu</a>(&amp;b[i]);</div>
<div class="line">    va = <a class="code" href="group__logic.html#ga5b8388150c286cd131c02f683f3c9d7a">v8f_and</a>(va, <a class="code" href="group__cast.html#gaa17847ce73d6a874574b4c875709560f">v8f_cast_v8i</a>(vmask));</div>
<div class="line">    s = <a class="code" href="group__arith.html#ga7f24f8ef9179b11fad584cfd3ae3bf14">v8f_fmadd</a>(va, vb, s);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">// reduce s</span></div>
<div class="line">  sp = <a class="code" href="group__shuffle.html#gaf50a78b995fbd8b5ad4771d8ccc5efb6">v8f_permute2</a>(s, PINTS_SHUFFLE(1, 0));</div>
<div class="line">  add1 = <a class="code" href="group__arith.html#gaca32427238a28d76a576c093c3a14647">v8f_add</a>(s, sp);</div>
<div class="line">  add1p = <a class="code" href="group__shuffle.html#ga6f0f67ec91fab6ea38a1186f80dec368">v8f_permute4x2</a>(add1, PINTS_SHUFFLE(2, 3, 0, 1));</div>
<div class="line">  add2 = <a class="code" href="group__arith.html#gaca32427238a28d76a576c093c3a14647">v8f_add</a>(add1, add1p);</div>
<div class="line">  add2p = <a class="code" href="group__shuffle.html#gaf70525aedb9b0b551450060421d18170">v8f_permute2x4</a>(add2, PINTS_SHUFFLE(1, 0));</div>
<div class="line">  add3 = <a class="code" href="group__arith.html#gaca32427238a28d76a576c093c3a14647">v8f_add</a>(add2, add2p);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// convert 1st element of add3 to float</span></div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="group__sconvert.html#gaec0955e6be08432f14cede49d1311d4a">sf_cvt_v8f</a>(add3);</div>
<div class="line">}</div>
</div><!-- fragment --><h2>How can I use it in my project?</h2>
<p>You need to copy the folder <code>include</code> of this repository into your project and include the file <code>pints.h</code> wherever you want to use it.</p>
<h2>Supported compilers</h2>
<p>This library has only been tested on the following compilers:</p>
<ul>
<li>gcc (5.1)</li>
<li>icc (16.0)</li>
</ul>
<p>However, this library is written with compatibility in mind and should also be compatible with other compilers</p>
<h2>Supported architectures</h2>
<p>For now, the supported architectures are:</p>
<ul>
<li>SSE</li>
<li>SSE2</li>
<li>SSE3</li>
<li>SSSE3</li>
<li>SSE4.1</li>
<li>SSE4.2</li>
<li>AVX</li>
<li>AVX2</li>
<li>FMA (AVX)</li>
</ul>
<p>It is planned to also support in the future:</p>
<ul>
<li>KNC</li>
<li>AVX512 (all variants)</li>
<li>Neon</li>
</ul>
<h2>Future features</h2>
<p>It is planned to add the following features to the library:</p>
<ul>
<li>Reductions (eg: full horizontal sum)</li>
<li>Transpositions (of vectors)</li>
<li>Masks primitives (for AVX512 and KNC support)</li>
<li>Shuffles with vector of indices</li>
<li>per instruction Rounding method? (only when supported)</li>
</ul>
<h2>Disclaimer</h2>
<p>This project is still in development and might not be stable enough for a production use. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
